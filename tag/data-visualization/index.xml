<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>data visualization | Silas Bergen</title>
    <link>https://driftlessdata.space/tag/data-visualization/</link>
      <atom:link href="https://driftlessdata.space/tag/data-visualization/index.xml" rel="self" type="application/rss+xml" />
    <description>data visualization</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>en-us</language><copyright>© 2021 Silas Bergen</copyright><lastBuildDate>Fri, 14 Feb 2020 00:00:00 -0600</lastBuildDate>
    <image>
      <url>https://driftlessdata.space/images/icon_hu88e77fda8259aec1ad610bc9dd60fa00_1241_512x512_fill_lanczos_center_2.png</url>
      <title>data visualization</title>
      <link>https://driftlessdata.space/tag/data-visualization/</link>
    </image>
    
    <item>
      <title>A life of war (MakeoverMonday Week 6)</title>
      <link>https://driftlessdata.space/post/mm6-2020-uswar/</link>
      <pubDate>Fri, 14 Feb 2020 00:00:00 -0600</pubDate>
      <guid>https://driftlessdata.space/post/mm6-2020-uswar/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;https://data.world/makeovermonday/2020w6&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;This week&amp;rsquo;s MakeoverMonday&lt;/a&gt; is a good one.  Without further ado, the original visualization by Philip Bump, appearing in his &lt;a href=&#34;https://www.washingtonpost.com/politics/2020/01/08/nearly-quarter-americans-have-never-experienced-us-time-peace/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Washington Post article&lt;/a&gt; entitled &lt;em&gt;Nearly 
a quarter of Americans have never experienced the U.S. in a time of peace&lt;/em&gt;:&lt;/p&gt;
&lt;figure&gt; 
&lt;img src=&#34;https://driftlessdata.space/img/mm6-original.png&#34; alt=&#34;placeholder&#34; title=&#34;original graph&#34; height=&#34;400&#34; width=&#34;400&#34; /&gt;
&lt;/figure&gt;
&lt;p&gt;This graph triggered my pedagogical Pavlovian dog.  Not just because it&amp;rsquo;s easy to malign the poor pie chart (of which this graph has 115!), but because I had a hunch that a 
redesign would reveal features of the data that are obscured above.&lt;/p&gt;
&lt;p&gt;But first, since we &lt;em&gt;do&lt;/em&gt; have pie charts, why not briefly discuss their relative merits and demerits.  Pie charts are fine if we want to show portions of a whole, and then 
only if we have relatively few slices.  In each pie above, we have only two slices for most years. So a pie chart would be just fine if, for example, I only cared about 
showing the relative portion of life lived in war and peace for people born in 1905.  The problem is that we don&amp;rsquo;t just have a pie for 1905, but for every year 1905-2019.  If we 
wanted to see how the percents change over time, we have to compare slice sizes &lt;em&gt;across pies&lt;/em&gt;, and this is very hard to do perceptually.  This draws from the work of William Cleveland, who ranked the elementary perceptual tasks we use to 
compare quantities.  We are very bad at making accurate comparisons when the quantities are encoded as angles (I discuss this in more detail &lt;a href=&#34;http://driftlessdata.space/post/on-epts/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;here&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;In the Washington Post graph, the thing that jumps out at me is the column of all-red on the right, and how much less red there is on the left.  It&amp;rsquo;s easy to see that people born since 2001 have lived their entire life 
during a U.S. war; those born in the early 20th century lived a much smaller portion of their lives during war.  What is &lt;em&gt;much less&lt;/em&gt; obvious is the nature of the upward trend: was it monotone?  Up-and-down? 
This is hard to tell!  It doesn&amp;rsquo;t help that in the original article, with my desktop Chrome browser at normal zoom, the graph is so tall that you have to scroll up and down to take it all in.&lt;/p&gt;
&lt;p&gt;Here is my redesign (&lt;a href=&#34;https://public.tableau.com/views/WhatportionofyourlifehastheU_S_beenatwarMakeoverMondayW6/Dashboard1?:display_count=y&amp;amp;publish=yes&amp;amp;:origin=viz_share_link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Tableau Public link&lt;/a&gt;):&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/img/US_at_war.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;I like to think of area charts as pie charts that work over time.  The redesign still shows us what the original did: people born in the early 20th century lived a much smaller portion of their lives
during war than people born in 2001.  We have preserved the &amp;ldquo;part-of-a-whole&amp;rdquo; story that pie charts have to tell. What the redesign reveals is that the upward trend is not monotone.  Rather we see a &amp;ldquo;sawtooth&amp;rdquo; pattern, where the saw teeth peak during wars
and and dip following wars.  Now that we have mapped these percents to a common vertical axis instead of encoded them as angles in a pie chart, we can perceive differences between them much more clearly.   And as a bonus, we don&amp;rsquo;t have to do any scrolling!&lt;/p&gt;
&lt;p&gt;A quick caveat: my redesign only includes the same wars listed in the original article, but you could argue the U.S. has been involved in many wars beyond just the ones shown.  Take a look for example at
&lt;a href=&#34;https://en.wikipedia.org/wiki/List_of_wars_involving_the_United_States&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;this list from Wikipedia&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>MakeoverMonday: Pesticide usage in US</title>
      <link>https://driftlessdata.space/post/makeovermondayweek2-pesticides/</link>
      <pubDate>Fri, 17 Jan 2020 00:00:00 -0600</pubDate>
      <guid>https://driftlessdata.space/post/makeovermondayweek2-pesticides/</guid>
      <description>&lt;p&gt;It&amp;rsquo;s been a while since I&amp;rsquo;ve posted!  For a while I&amp;rsquo;ve been interested in joining the &lt;a href=&#34;https://www.makeovermonday.co.uk/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;MakeoverMonday&lt;/a&gt; community, a group
of data visualizers who come together each week to critique and redesign a visualization provided by Eva Murray and Andy Kriebel.  I haven&amp;rsquo;t, due to busyness mostly, but this semester I finally took the 
dive and signed up!  Call it a 2020 resolution. I hope that this will become a regular opportunity for me to keep developing my visualization critique and design skills.&lt;/p&gt;
&lt;p&gt;I enjoyed my first challenge, &lt;a href=&#34;https://data.world/makeovermonday/2020w2&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;MakeoverMonday 2020 Week 2&lt;/a&gt;,  a simple visualization that nonetheless provides a lot to think about and was a challenging redesign.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s the original visualization, Figure 1 from the &lt;em&gt;Environmental Health&lt;/em&gt; article &lt;a href=&#34;https://ehjournal.biomedcentral.com/articles/10.1186/s12940-019-0488-0&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;em&gt;The USA lags behind other agricultural nations in banning harmful pesticides&lt;/em&gt;:&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/img/mm2-original.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;The &lt;a href=&#34;https://data.world/makeovermonday/2020w2/workspace/file?filename=MM&amp;#43;data&amp;#43;week&amp;#43;2&amp;#43;2020.xlsx&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;data provided at data.world&lt;/a&gt; for the redesign don&amp;rsquo;t actually contain the same information on counts that we see in the original viz, but rather
data on total weight of pesticides that are banned/phased out in other countries that were applied used in the U.S. in 2016.&lt;/p&gt;
&lt;p&gt;My critiques of the original figure:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The way the &amp;ldquo;whole&amp;rdquo; is divvied up (whether that &amp;ldquo;whole&amp;rdquo; is number of pesticides or total lbs applied) between EU, Brazil, and China is very unclear.  The figure tries to get at intersections by
including $\geq 1$, $\geq 2$ and All 3, but it&amp;rsquo;s impossible to know which pesticides are banned by (for example) both China and Brazil.  It takes a while to understand what the &amp;ldquo;whole&amp;rdquo; is.&lt;/li&gt;
&lt;li&gt;The categories along the horizontal are a mix of both country labels and &lt;em&gt;number of countries&lt;/em&gt;.  I don&amp;rsquo;t like this mixing of label types.&lt;/li&gt;
&lt;li&gt;Only counts of pesticides are shown: no information about &lt;em&gt;amount&lt;/em&gt; of pesticides applied is available in the visualization shown.  For example, China has banned only 11 pesticides, but does it ban the &amp;ldquo;big ones&amp;rdquo; as applied in the U.S.?  We can&amp;rsquo;t 
tell from the figure.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In my redesign, I had a couple goals to address these critiques:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Make clear what the &amp;ldquo;whole&amp;rdquo; is.&lt;/li&gt;
&lt;li&gt;Allow the viewer to see where the intersections in banned pesticides exist.  E.g., if a pesticide is banned in the EU, is it also banned in China, or in Brazil?  All 3?&lt;/li&gt;
&lt;li&gt;Visualization amount applied rather than counts.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;To accomplish this I had to dig a bit deeper than the data provided on Data World, and found what I was looking for with &lt;a href=&#34;https://static-content.springer.com/esm/art%3A10.1186%2Fs12940-019-0488-0/MediaObjects/12940_2019_488_MOESM5_ESM.xlsx&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Additional File 5, Tables S131-S133&lt;/a&gt; from
the article.  I also had to do a bit of cleaning.  Here&amp;rsquo;s a &lt;a href=&#34;https://www.dropbox.com/s/oop1g8ws3dbwir3/pesticide_clean.csv?dl=0&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;link to the data&lt;/a&gt; I ultimately ended up connecting to in Tableau&lt;/p&gt;
&lt;p&gt;Finally, my redesign (&lt;a href=&#34;https://public.tableau.com/views/pesticide_viz/Dashboard32?:display_count=y&amp;amp;publish=yes&amp;amp;:origin=viz_share_link&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Tableau Public version&lt;/a&gt;):&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/img/mm2.PNG&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;Some design comments:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;This accomplishes (I think) a clear visual of &amp;ldquo;the whole&amp;rdquo;: the giant (perhaps too giant) grey box with &amp;ldquo;328 million pounds&amp;rdquo; are the first things you see&lt;/li&gt;
&lt;li&gt;If desired, you can see which pesticides are banned in the EU, China, &lt;em&gt;&lt;strong&gt;and/or&lt;/strong&gt;&lt;/em&gt; Brazil.  This information was obscured before.&lt;/li&gt;
&lt;li&gt;You can now see that although China has banned fewer pesticides, they are pesticides that are more widely used (at least in the U.S.).&lt;/li&gt;
&lt;li&gt;A critique of my own redesign: are the percents meaningful?  &amp;ldquo;98%&amp;rdquo; is a weird percent: the percent of &lt;em&gt;US-applied&lt;/em&gt; pesticides that are banned in the EU.  If they were banned in the US,
would they be replaced by something else?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Some technical comments:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The grey box is giant, perhaps too much so, but getting Tableau to label the cells of the treemap in a satisfactory way was a pain.  Some of the labels (e.g. Fomesan) I added manually.&lt;/li&gt;
&lt;li&gt;Getting the four treemaps to divide the pesticides up in the same way, while applying different color schemes, was a pain and I used a hack approach (download the Tableau workbook if you are curious).&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;p&gt;R code for creating the .csv I used in my redesign, which begins with a &lt;a href=&#34;https://www.dropbox.com/s/npu4pp5oaxewznz/pesticide_complete_stack.csv?dl=0&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;stacked version&lt;/a&gt; of Tables S131-S133 from 
&lt;a href=&#34;https://static-content.springer.com/esm/art%3A10.1186%2Fs12940-019-0488-0/MediaObjects/12940_2019_488_MOESM5_ESM.xlsx&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Additional file 5&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;pest &amp;lt;- read.csv(&#39;pesticide_complete_stack.csv&#39;)

library(tidyr) 
library(dplyr)
lbs &amp;lt;- pest %&amp;gt;% group_by(Pesticide) %&amp;gt;% summarize(USLbs2016 = mean(USLbs2016))
use &amp;lt;- function(col) ifelse(is.na(col),0,1)

out &amp;lt;- pest %&amp;gt;% spread(key = CountryBanned, value = USLbs2016) %&amp;gt;%
  inner_join(lbs, by = &#39;Pesticide&#39;) %&amp;gt;%
  mutate_at(vars(EU:Brazil), use) %&amp;gt;%
  mutate(nbanned = Brazil + China + EU) %&amp;gt;%
  mutate(used_US = ifelse(USLbs2016&amp;gt; 0, 1, 0)) %&amp;gt;% 
  select(Pesticide, USLbs2016, EU,China,Brazil,nbanned,used_US)

write.csv(out, file = &#39;pesticide_clean.csv&#39;,row.names=FALSE)
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Data vizzing in Japan</title>
      <link>https://driftlessdata.space/post/icots/</link>
      <pubDate>Sat, 14 Jul 2018 00:00:00 -0500</pubDate>
      <guid>https://driftlessdata.space/post/icots/</guid>
      <description>&lt;p&gt;This July, my colleage Todd Iverson and I had the incredible opportunity to lead a &lt;a href=&#34;https://icots.info/10/?workshop=E&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;pre-conference workshop&lt;/a&gt; at &lt;a href=&#34;https://icots.info/10/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ICOTS 10&lt;/a&gt; in Kyoto, Japan.  Our workshop was titled &lt;em&gt;Data visualization: best practices and principles using Tableau Public and Python.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Our workshop began by covering &lt;a href=&#34;https://www.springer.com/us/book/9780387245447&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Leland Wilkinson&amp;rsquo;s grammar of graphics&lt;/a&gt;.  Most data visualization software (Tableau, Python, R, JMP) employ some version of this grammar, and with a firm understanding it becomes easy to transition between them.  We focused primarily on Tableau and Python in our workshop.  All the workshop materials are available at the designated &lt;a href=&#34;https://github.com/WSU-DataScience/ICOTS10_Data_Visualization&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Github repository&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;It was an engaging four hours that felt more like one hour, with participants from all over the world!  Our fantastic crew:&lt;/p&gt;
&lt;center&gt;
 &lt;figure&gt;
    &lt;img width=&#34;500&#34; src=&#34;https://driftlessdata.space/img/icots.jpg&#34;&gt;
 &lt;/figure&gt;
&lt;/center&gt; 
&lt;p&gt;ICOTS 10 itself was fantastic, including keynotes from Chris Wild, Hillary Parker, and Anna Rosling Rönnlund. And of course, we made time to explore and sample the local cuisine.&lt;/p&gt;
&lt;img src=&#34;https://driftlessdata.space/img/fushimi.jpg&#34;  style=&#34;float: left; width: 48%; margin-right: 1%; margin-bottom: 0.5em;&#34;&gt;
&lt;img src=&#34;https://driftlessdata.space/img/ramen.jpg&#34;  style=&#34;float: left; width: 48%; margin-right: 1%; margin-bottom: 0.5em;&#34;&gt;
&lt;p style=&#34;clear: both;&#34;&gt;
</description>
    </item>
    
    <item>
      <title>On elementary perceptual tasks</title>
      <link>https://driftlessdata.space/post/on-epts/</link>
      <pubDate>Tue, 19 Dec 2017 00:00:00 +0000</pubDate>
      <guid>https://driftlessdata.space/post/on-epts/</guid>
      <description>&lt;p&gt;One of the first concepts I talk about in my &lt;a href=&#34;../../courses/dsci310/dsci310-home/&#34;&gt;data visualization course&lt;/a&gt; is the idea of the &lt;a href=&#34;http://info.slis.indiana.edu/~katy/S637-S11/cleveland84.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;em&gt;elementary perceptual task&lt;/em&gt;&lt;/a&gt; (EPT), an idea explored in depth by visualization pioneers William S. Cleveland and Robert McGill.  Essentially, EPTs are visual building blocks for comparing quantities.  The EPTs are summarized nicely in Figure 1 from &lt;a href=&#34;http://info.slis.indiana.edu/~katy/S637-S11/cleveland84.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;em&gt;Graphical Perception: Theory, Experiementation, and Application to the Development of Graphical Methods&lt;/em&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;center&gt;
&lt;figure&gt;
&lt;img src = &#34;../../img/ept.JPG&#34; width=&#34;500&#34;&gt;
&lt;/figure&gt;
&lt;/center&gt;
&lt;p&gt;For example, looking at the two dots in the upper-left pane, we perceive that the top dot represents a larger quantity than the bottom dot, because it is &lt;em&gt;higher on a common scale&lt;/em&gt; than the bottom dot.   In the middle panel (&amp;ldquo;Angle&amp;rdquo;), we perceive that the angle on the right represents a larger quantity than the angle on the left, since it is a larger angle.&lt;/p&gt;
&lt;p&gt;A fundamental finding from the article is that, as humans, we are better at some elementary perceptual tasks than at others.  We more accurately and easily compare quantities if they are mapped using &lt;em&gt;&lt;strong&gt;position on a common scale&lt;/strong&gt;&lt;/em&gt; than if they are mapped using &lt;em&gt;&lt;strong&gt;length&lt;/strong&gt;&lt;/em&gt;, &lt;em&gt;&lt;strong&gt;angle&lt;/strong&gt;&lt;/em&gt; or &lt;em&gt;&lt;strong&gt;size&lt;/strong&gt;&lt;/em&gt;.  In fact, Cleveland and McGill came up with the following ranking of EPTs we perform most efficiently when visually comparing quantities:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;Position along a common scale;&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;Position along misaligned scales;&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;Length;&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;Angles;&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;Size;&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;&lt;strong&gt;Color&lt;/strong&gt;&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Recently, I wrote &lt;a href=&#34;../income-gestalt/&#34;&gt;a post&lt;/a&gt; discussing a few of the Gestalt principles and illustrating them with some ACS data on income, sex, and field of degree.  The Gestalt principles describe how we perceive patterns, while the EPTs describe how we most efficiently compare quantities.  In this post, we continue to use income data from the American Community Survey to illustrate EPTs.&lt;/p&gt;
&lt;h3 id=&#34;case-study-employment-level-by-sex&#34;&gt;Case study: employment level by sex&lt;/h3&gt;
&lt;p&gt;In my &lt;a href=&#34;../income-gestalt/&#34;&gt;previous post&lt;/a&gt;, it was apparent that a gender gap in average annual income persisted even when accounting for year, highest degree, and field of degree.  Another important factor that explains income is level of employment, as measured by average hours worked per week.  The data for this example are once again &lt;a href=&#34;https://www.dropbox.com/s/0wmr2brny428lo3/ACS-income-data-aggregated.csv?dl=0&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;aggregated ACS data&lt;/a&gt; from the &lt;a href=&#34;https://usa.ipums.org/usa-action/variables/group&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;IPUMS USA&lt;/a&gt; extract system, filtered to include only employed individuals with at least a Bachelor&amp;rsquo;s degree.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s start by sticking yet another pitchfork in the favorite straw man of data visualization: the pie chart.  With an understanding of EPTs, we can begin to understand why pie charts are &lt;a href=&#34;http://www.businessinsider.com/pie-charts-are-the-worst-2013-6&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;so&lt;/a&gt; &lt;a href=&#34;https://blog.funnel.io/why-we-dont-use-pie-charts-and-some-tips-on-better-data-visualizations&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;maligned&lt;/a&gt; in the data visualization community.  Take a look at the graph below, and try to determine how the percent of females working full time changes over the years:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/on-epts_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Pie charts are fine for visualizing &lt;em&gt;parts of a single whole&lt;/em&gt; (it is easy to tell that, in any given year, a majority of women work full time), but they make it difficult to compare parts of &lt;em&gt;different wholes&lt;/em&gt; (how the percent working full time changes over the years).
This comparison is difficult to make because we are comparing &lt;em&gt;&lt;strong&gt;angles&lt;/strong&gt;&lt;/em&gt;, an elementary perceptual task that we do not perform very efficiently or well.  Here are the same data, different graph:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/on-epts_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;480&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Notice that it&amp;rsquo;s now much easier to discern that the percent of females working 40 or more hours per week is increasing over time, while the percent of females working part-time is decreasing.  We now compare the &lt;em&gt;&lt;strong&gt;position&lt;/strong&gt;&lt;/em&gt; of the quantities denoted by points along a common scale (the vertical Y-axis), rather than the &lt;em&gt;&lt;strong&gt;angle&lt;/strong&gt;&lt;/em&gt;.  We can also still clearly see that in each year, a majority of women work full time, by comparing the points along the common vertical scale within a single year.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s turn now to comparing the hours worked for females to males, in 2016 alone.  We&amp;rsquo;ll  use a bar chart for this:
&lt;img src=&#34;https://driftlessdata.space/post/on-epts_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;What EPT are we using to compare the percents?  It is &lt;a href=&#34;http://flowingdata.com/2010/03/20/graphical-perception-learn-the-fundamentals-first/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;tempting to think&lt;/a&gt; that when we compare quantities in bar charts, we are comparing &lt;em&gt;&lt;strong&gt;lengths&lt;/strong&gt;&lt;/em&gt; of the bars.  But this is not the primary EPT we are using, here.  We are really comparing &lt;em&gt;&lt;strong&gt;position along a comon scale&lt;/strong&gt;&lt;/em&gt; once again.  This is clearer if we represent the quantities not as bars, but as points.  We are carrying out the same exact elementary perceptual task to compare the percents:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/on-epts_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;This &amp;ldquo;point chart&amp;rdquo; has a much better &lt;a href=&#34;http://www.infovis-wiki.net/index.php/Data-Ink_Ratio&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;em&gt;data-to-ink ratio&lt;/em&gt;&lt;/a&gt; than the bar chart, a concept coined by &lt;a href=&#34;https://www.edwardtufte.com/tufte/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Edward Tufte&lt;/a&gt;.  One could argue that it is cleaner and more succinct; better emphasizes the data; and exploits the same exact EPT as the bar chart.  Why, then, are bar charts so pervasive while these &amp;ldquo;point charts&amp;rdquo; are not?  I think the reason is two-fold.  First, we just have a comfort level with bar charts.  The point of a data visualization is communication: if we can communicate quicker with a more familiar medium, that has advantages.  Second, perhaps more importantly, when we see points we immediately start looking for trends.  &lt;em&gt;&lt;strong&gt;Direction&lt;/strong&gt;&lt;/em&gt; is one of Cleveland and McGill&amp;rsquo;s EPTs; we are more inclined to try to visually connect points than the tops of bars.  However, we shouldn&amp;rsquo;t always connect points, especially if the categories on the horizontal have no sense of ordering (for example, if &amp;ldquo;race,&amp;rdquo; which has no ordering, was on the horizontal instead of employment level).&lt;/p&gt;
&lt;p&gt;For these reasons, let&amp;rsquo;s go back to the bar chart.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/on-epts_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;What comparison does this encourage us to make?  Because of the two separate panels for females and males (the &lt;a href=&#34;../income-gestalt/&#34;&gt;Gestalt principle&lt;/a&gt; of &lt;em&gt;&lt;strong&gt;enclosure&lt;/strong&gt;&lt;/em&gt;), the encouraged comparisons seem to be &lt;em&gt;within&lt;/em&gt; sex: among females, a much greater percent of them work 40 or more hours a week than are in the other 3 categories; the same can be said for males.  It is more likely that we want to compare &lt;em&gt;across&lt;/em&gt; sex: assess differences between males and females in work time.  How can we better encourage this comparison?  One approach is to group by hours worked, rather than sex:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/on-epts_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;This better encourages us to compare females to males, but it still requires us to jump from panel to panel to make that comparison for each employment level.  Another major problem with the above graph is that the percents are calculated by conditioning &lt;em&gt;on sex&lt;/em&gt;, whereas the facets make it appear the conditioning is &lt;em&gt;on employment level&lt;/em&gt;.  For example, when we see two bars representing percents in a single panel, we are tempted to think that the total height of the two bars is 100%, which is clearly not the case.  The &amp;ldquo;whole&amp;rdquo; out of which the percents are taken is not at all clear.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s one last take: a &lt;em&gt;stacked bar chart&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/on-epts_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;This accomplishes two objectives previous visualizations lacked: A) making the most important comparison obvious (comparing females to males), and B) making obvious &amp;ldquo;the whole&amp;rdquo; out of which the percents are taken.  Note that when comparing females to males, we use &lt;em&gt;&lt;strong&gt;position along the common (vertical) axis&lt;/strong&gt;&lt;/em&gt; to compare the percents who work 40 or more hours (by determining which dark blue bar extends &lt;em&gt;highest&lt;/em&gt; on the vertical); and to compare the percents who work 20 or fewer hours (by determining which white bar extends &lt;em&gt;lowest&lt;/em&gt; on the vertical).  However, to compare the percent who work 21-30 or 31-39 across sex, we use &lt;em&gt;&lt;strong&gt;length&lt;/strong&gt;&lt;/em&gt;, since the middle bars do not share a common baseline.  Although we sacrifice making comparisons using &lt;em&gt;&lt;strong&gt;position along a common scale&lt;/strong&gt;&lt;/em&gt; with the stacked bar chart for two of the employment levels, we make up for it with fewer facets; more succinct presentation; and more obvious important comparisons.&lt;/p&gt;
&lt;h3 id=&#34;data-notes&#34;&gt;Data notes&lt;/h3&gt;
&lt;p&gt;Some of the averages in the &lt;a href=&#34;https://www.dropbox.com/s/0wmr2brny428lo3/ACS-income-data-aggregated.csv?dl=0&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;data set&lt;/a&gt; I used for this post (for example, average income for Alabaman males with a doctoral degree in 2009) are based on very few observations, and should be taken with a very large grain of salt.  Another brief data note: to aggregate this data set further, it is important to weight by the &lt;code&gt;N&lt;/code&gt; column, which indicates how many individuals in the population the average for that row represents.&lt;/p&gt;
&lt;h3 id=&#34;r-code&#34;&gt;R code&lt;/h3&gt;
&lt;p&gt;If interested, here is the R code for creating the bar charts.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(ggplot2)
library(dplyr)

#Read in the data; assuming current working directory houses the .csv file
tmp &amp;lt;- read.csv(&#39;ACS-income-data-aggregated.csv&#39;)

#Filter to only 2016; aggregate incomes
df &amp;lt;- tmp%&amp;gt;%
 filter(Year == 2016) %&amp;gt;%
  group_by(Sex,Hours.work) %&amp;gt;%
  summarize(count = sum(N), avg.income = weighted.mean(avg.income, N)) %&amp;gt;%
  filter(Hours.work != &amp;quot;&amp;quot;)%&amp;gt;%
  mutate(pct = count/sum(count))

#Side by side; faceted by sex:
ggplot(data = df) + 
 geom_bar(aes(x = Hours.work, y = 100*pct, fill=Hours.work), stat=&#39;identity&#39;) + 
  scale_fill_brewer(palette=&#39;Blues&#39;) +
  guides(fill=FALSE) +
  theme_dark()+
   ggtitle(&#39;Employment level by sex: Bar chart&#39;) +
 facet_wrap(~Sex)+
    theme(panel.grid=element_blank()) + 
  xlab(&#39;Employment level&#39;) + ylab(&#39;Percent&#39;)+
  ylim(c(0,100))

#Side by side; faceted by employment level:
ggplot(data = df) + 
 geom_bar(aes(x = Sex, y = 100*pct, fill=Hours.work), stat=&#39;identity&#39;) + 
  scale_fill_brewer(palette=&#39;Blues&#39;) +
  guides(fill=FALSE) +
  theme_dark()+
 facet_grid(.~Hours.work)+
    theme(panel.grid=element_blank()) + 
  xlab(&#39;Employment level&#39;) + ylab(&#39;Percent&#39;)+
  ylim(c(0,100))

#Stacked:
ggplot(data = df) + 
 geom_bar(aes(x = Sex, y = 100*pct, fill=Hours.work), stat=&#39;identity&#39;) + 
  scale_fill_brewer(name=&#39;Employment level&#39;,palette=&#39;Blues&#39;) +
  theme_dark()+
    theme(panel.grid=element_blank()) + 
  xlab(&#39;Employment level&#39;) + ylab(&#39;Percent&#39;)+
  ylim(c(0,100))
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Gestalt principles and income inequality</title>
      <link>https://driftlessdata.space/post/income-gestalt/</link>
      <pubDate>Tue, 12 Dec 2017 00:00:00 +0000</pubDate>
      <guid>https://driftlessdata.space/post/income-gestalt/</guid>
      <description>&lt;p&gt;The fall semester is over and final grades are in, which means it&amp;rsquo;s time to reflect on what just took place and how to grow from here.  Today, I reflect on my third time teaching the &lt;a href=&#34;https://driftlessdata.space/courses/dsci310/home/&#34;&gt;data visualization course&lt;/a&gt;.  This course has come a long way since the first time I taught it in Fall 2015, and yet there are still so many improvements to make!  One of the concepts I want to greater emphasize next time I teach the course are the &lt;em&gt;Gestalt principles&lt;/em&gt;, which Gestalt psychologist Kurt Koffka summarizes as the idea that &lt;a href=&#34;https://www.interaction-design.org/literature/topics/gestalt-principles&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&amp;ldquo;The whole is &lt;em&gt;other&lt;/em&gt; than the sum of the parts.&amp;quot;&lt;/a&gt;.  I like to think of the Gestalt principles as ground rules for how to create meaningful patterns out of chaos.&lt;/p&gt;
&lt;p&gt;Twain Taylor has an &lt;a href=&#34;https://www.fusioncharts.com/blog/how-to-use-the-gestalt-principles-for-visual-storytelling-podv/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;excellent post&lt;/a&gt; on how the Gestalt principles manifest in data visualization.  He summarizes the principles in this chart:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://www.fusioncharts.com/blog/wp-content/uploads/2014/03/illustrations.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;Quoting from his &lt;a href=&#34;https://www.fusioncharts.com/blog/how-to-use-the-gestalt-principles-for-visual-storytelling-podv/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;post&lt;/a&gt;;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Here is what we notice from each of the illustrations:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Proximity&lt;/strong&gt;: We see three rows of dots instead of four columns of dots because they are closer horizontally than vertically.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Similarity&lt;/strong&gt;: We see similar looking objects as part of the same group.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Enclosure&lt;/strong&gt;: We group the first four and and last four dots as two rows instead of eight dots.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Symmetry&lt;/strong&gt;: We see three pairs of symmetrical brackets rather than six individual brackets.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Closure&lt;/strong&gt;: We automatically close the square and circle instead of seeing three disconnected paths.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Continuity&lt;/strong&gt;: We see one continuous path instead of three arbitrary ones.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Connection&lt;/strong&gt;: We group the connected dots as belonging to the same group.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Figure &amp;amp; ground&lt;/strong&gt;: We either notice the two faces, or the vase. Whichever we notice becomes the figure, and the other the ground&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;In my experience visualizing data, it seems the most pervasive principles are &lt;em&gt;proximity&lt;/em&gt;, &lt;em&gt;similarity&lt;/em&gt;, &lt;em&gt;enclosure&lt;/em&gt;, and &lt;em&gt;connection&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;I was struck by the ubiquitousness of these principles as I was reviewing my students&#39; final visualization projects.  One &lt;a href=&#34;https://public.tableau.com/views/STEM_8/Salary?:embed=y&amp;amp;:display_count=yes&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;very fine project in particular&lt;/a&gt; inspired me to write this post.  Next time I teach the visualization course, I hope to include the following example to illustrate these principles to my students.&lt;/p&gt;
&lt;h3 id=&#34;illustrating-the-gestalt-principles-with-acs-income-data&#34;&gt;Illustrating the Gestalt principles with ACS income data&lt;/h3&gt;
&lt;p&gt;As an example data set, I settled on data over 2009-2016 from the &lt;a href=&#34;https://www.census.gov/programs-surveys/acs/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;American Community Survey&lt;/a&gt;, which I requested from the &lt;a href=&#34;https://usa.ipums.org/usa/index.shtml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;IPUMS USA&lt;/a&gt; data request system.  I specifically requested incomes by year, sex, educational attainment, and field of degree.  I filtered the data to only include those with a Bachelor&amp;rsquo;s degree or higher who were currently employed at the time of sampling, and created a new variable to indicate whether or not the field was a STEM field (using a combination of &lt;a href=&#34;http://mentornet.org/service/stem_fields.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;this source&lt;/a&gt; and &lt;a href=&#34;http://stemdegreelist.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;this source&lt;/a&gt; to help me determine).&lt;/p&gt;
&lt;p&gt;The primary question I want to visualize is: &lt;em&gt;&lt;strong&gt;What is the inequality in average income comparing males to females?&lt;/strong&gt;&lt;/em&gt; Of course, average income depends on many other factors, including field of degree, type of degree, and year, to name just a few.  We&amp;rsquo;ll focus on visualizing the gender income gap adjusting for these other factors as well.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s a quick look at the first six rows of the data set.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;##   Year    Sex              Educ    Field avg.income
## 1 2009 Female Bachelor&#39;s degree Non-STEM   47440.41
## 2 2009 Female Bachelor&#39;s degree     STEM   51423.20
## 3 2009 Female   Doctoral degree Non-STEM   77378.22
## 4 2009 Female   Doctoral degree     STEM   87257.88
## 5 2009 Female   Master&#39;s degree Non-STEM   60549.57
## 6 2009 Female   Master&#39;s degree     STEM   65621.16
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Notably, the data set consists of one row per year/sex/education/field category, with &lt;code&gt;avg.income&lt;/code&gt; indicating the average income for that combination.&lt;/p&gt;
&lt;p&gt;So let&amp;rsquo;s visualize!  We want to investigate the gender income gap, so here&amp;rsquo;s a first go:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/income-gestalt_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;288&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Mostly, this is chaos!  But we do see the Gestalt principle of &lt;em&gt;&lt;strong&gt;proximity&lt;/strong&gt;&lt;/em&gt; manifest itself: we perceive the incomes on the left (belonging to females) as a group, and the incomes on the right (belonging to males) as a group.  Let&amp;rsquo;s incorporate &lt;strong&gt;Year&lt;/strong&gt; on the horizontal, since we are accustomed to identifying trends across time:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/income-gestalt_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;384&#34; /&gt;&lt;/p&gt;
&lt;p&gt;We now see year groupings by way of the &lt;em&gt;&lt;strong&gt;proximity&lt;/strong&gt;&lt;/em&gt; principle, and sex groupings via color-coding with the &lt;em&gt;&lt;strong&gt;similarity&lt;/strong&gt;&lt;/em&gt; principle.  There&amp;rsquo;s still too much chaos, however.  Let&amp;rsquo;s try again:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/income-gestalt_files/figure-html/unnamed-chunk-4-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The amount of chaos is reduced dramatically, all by way of implementing the &lt;em&gt;&lt;strong&gt;enclosure&lt;/strong&gt;&lt;/em&gt; principle, specifically enclosing the highest level of educational attainments together in separate panels.  This particular type of enclosure is often referred to as &lt;em&gt;faceting&lt;/em&gt; in the data visualization realm. The drastic reduction in chaos, and improvement of clarity, is due to the fact that there were four educational attainment groupings.  We would not have improved the clarity as much if we had, say, grouped by field of degree instead, which only has two groups:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/income-gestalt_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Faceting by educational attainment is better, so let&amp;rsquo;s continue working with that one, now indicating field of degree:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/income-gestalt_files/figure-html/unnamed-chunk-6-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The new principle is &lt;em&gt;&lt;strong&gt;connection&lt;/strong&gt;&lt;/em&gt;.  Clearly, we perceive each line as an entity, representing now a Sex/Field combination (Male/STEM, for example).  Another instance of &lt;em&gt;&lt;strong&gt;similarity&lt;/strong&gt;&lt;/em&gt; is in play, since the lines for STEM fields are dashed, while the lines for non-STEM fields are solid.&lt;/p&gt;
&lt;p&gt;So, here we have it, a visualization that illustrates the principles of &lt;em&gt;&lt;strong&gt;proximity&lt;/strong&gt;&lt;/em&gt;, &lt;em&gt;&lt;strong&gt;similarity&lt;/strong&gt;&lt;/em&gt;, &lt;em&gt;&lt;strong&gt;enclosure&lt;/strong&gt;&lt;/em&gt;, and &lt;em&gt;&lt;strong&gt;connection&lt;/strong&gt;&lt;/em&gt;.  We&amp;rsquo;ve implemented these principles to significantly reduce chaos and improve clarity.  But there&amp;rsquo;s still an issue with this visualization.  Remember the intent of the visualization is to explore &lt;strong&gt;gender income inequality&lt;/strong&gt;.  If we take another look at the above visualization, this is not the most obvious comparison to make.  Rather, due to the &lt;em&gt;&lt;strong&gt;proximity&lt;/strong&gt;&lt;/em&gt; and &lt;em&gt;&lt;strong&gt;similarity&lt;/strong&gt;&lt;/em&gt; of the lines within each sex (they are close together, and of the same color), the comparison our brain is encouraged to make is to compare incomes of STEM to non-STEM, &lt;em&gt;within&lt;/em&gt; sex.  That&amp;rsquo;s not the most important comparison!  It makes most sense to compare males to females, &lt;em&gt;within&lt;/em&gt; field.&lt;/p&gt;
&lt;p&gt;This brings us to a related concept: &lt;em&gt;not all means of introducing similarity are created equal&lt;/em&gt;.  When we group by similarity, we tend to first recognize similarities in &lt;em&gt;color&lt;/em&gt;, then in &lt;em&gt;shape&lt;/em&gt;.  Angela Wright, a color psychologist, states that &lt;a href=&#34;http://businessadvance.com/wp-content/uploads/2015/04/white-paper-sequence-of-cognition.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&amp;ldquo;color is noticed by the brain before shapes or wording.&amp;quot;&lt;/a&gt;  Thus if we want the encourage the viewer to compare the sexes, we should probably color-code by field instead, so we compare income by gender &lt;em&gt;within&lt;/em&gt; field.  Here&amp;rsquo;s how that looks:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/income-gestalt_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m still not convinced that this encourages the brain to first compare the sexes to each other.  The &lt;em&gt;&lt;strong&gt;proximity&lt;/strong&gt;&lt;/em&gt; of the STEM and non-STEM lines is too hard to overcome!  We might need to introduce another layer of &lt;em&gt;&lt;strong&gt;enclosure&lt;/strong&gt;&lt;/em&gt; (by way of faceting) to make the important comparison the most obvious:&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://driftlessdata.space/post/income-gestalt_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;h3 id=&#34;details-on-data-collection-and-visualization&#34;&gt;Details on data collection and visualization&lt;/h3&gt;
&lt;p&gt;IPUMS stands for &lt;em&gt;Integrated Public-Use Microdata Series&lt;/em&gt;.  The suite of &lt;a href=&#34;https://www.ipums.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;IPUMS tools&lt;/a&gt; is an excellent source of varied data, from health to education to international census data.  I aggregated the data for this example from the microdata extract, and you can download a &lt;a href=&#34;https://www.dropbox.com/s/r729zbwjjxoboy1/ACS-stem-aggregated.csv?dl=0&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;.csv of the aggregated data here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;R code for creating the &amp;ldquo;final two&amp;rdquo; visualizations is below:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&#34;language-r&#34;&gt;library(ggplot2)
#Assuming file is in current working directory:
stemdata &amp;lt;- read.csv(&amp;quot;ACS-stem-aggregated.csv&amp;quot;)
stemdata$Educ &amp;lt;- factor(stemdata$Educ, levels = c(&amp;quot;Bachelor&#39;s degree&amp;quot;,&amp;quot;Master&#39;s degree&amp;quot;,&amp;quot;Doctoral degree&amp;quot;,&amp;quot;Professional degree&amp;quot;))

#Faceting by education;
#color-coding by field;
#different lines for Sex:
ggplot(data = stemdata) + 
   geom_point(aes(x = Year, y = avg.income/1000,color=Field)) +
     geom_line(aes(x = Year, y = avg.income/1000,color=Field,linetype=Sex)) +
                facet_grid(.~Educ)+
  ylab(&#39;Average income (in thousand $)&#39;)


#Double faceting:
ggplot(data = stemdata) + 
  #geom_point(aes(x = Year, y = avg.income/1000, shape=Sex)) +
     geom_line(aes(x = Year, y = avg.income/1000,linetype=Sex)) +
                facet_grid(Field~ Educ)+
  ylab(&#39;Average income (in thousand $)&#39;)
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>And the winner is...</title>
      <link>https://driftlessdata.space/post/policedatachallenge/</link>
      <pubDate>Thu, 07 Dec 2017 00:00:00 -0600</pubDate>
      <guid>https://driftlessdata.space/post/policedatachallenge/</guid>
      <description>&lt;p&gt;The &lt;a href=&#34;https://driftlessdata.space/courses/dsci310/midterm/&#34;&gt;midterm project for my data visualization course&lt;/a&gt; this past fall required students to submit to the &lt;a href=&#34;http://thisisstatistics.org/policedatachallenge/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ASA&amp;rsquo;s Police Data Challenge&lt;/a&gt;.  The competition involved analyzing millions of 911 calls for one of three cities (Baltimore, Cincinnati, or Seattle).  I had the students investigate the Seattle data set, since it contained latitudes and longitudes of each call.&lt;/p&gt;
&lt;p&gt;Several weeks later, we received the exciting news that one of the teams won &lt;a href=&#34;http://thisisstatistics.org/police-data-challenge-congratulations-to-our-winners/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&amp;ldquo;Best Overall&amp;rdquo;&lt;/a&gt; among undergraduate teams!  Congratulations to Winona State students &lt;a href=&#34;https://www.linkedin.com/in/jimmyjhickey/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Jimmy Hickey&lt;/a&gt;, &lt;a href=&#34;https://www.linkedin.com/in/kapil-khanal/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kapil Khanal&lt;/a&gt;, and Luke Peacock for their excellent work.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Quantifying thrill</title>
      <link>https://driftlessdata.space/post/viz-worldseries-wpa/</link>
      <pubDate>Tue, 31 Oct 2017 00:00:00 -0500</pubDate>
      <guid>https://driftlessdata.space/post/viz-worldseries-wpa/</guid>
      <description>&lt;p&gt;Monday morning, October 30, found me groggy and sandy-eyed.  The culprit was the 5-hour and 17-minute, 10-inning thriller between the LA Dodgers and Houston Astros in Game 5 of the 2017 the night before.  Thanks to living in the Central Time Zone, I went to bed around 1am. The Astros ended up defeating the Dodgers 13-12, but the game was insane, featuring three comebacks from deficits of 3 runs or more.  By the end, I was emotionally exhausted, and I didn&amp;rsquo;t even have a stake in either team!  Lots was written about the game over at &lt;a href=&#34;http://www.fangraphs.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fangraphs&lt;/a&gt;, one of my favorite baseball analytics websites.&lt;/p&gt;
&lt;p&gt;One &lt;a href=&#34;https://www.fangraphs.com/blogs/game-five-was-as-weird-as-it-felt/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;post in particular&lt;/a&gt; by Craig Edwards caught my attention from a data visualization perspective.  It compared the game to another epic game: &lt;a href=&#34;https://www.baseball-reference.com/boxes/SLN/SLN201110270.shtml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Game 6 of the 2011 World Series&lt;/a&gt;, where the St. Louis Cardinals staved off elimination by defeating the Texas Rangers 10-9 in 11 innings.  The crux of the article was a table that listed the top-20 &amp;ldquo;most exciting events&amp;rdquo; of each World Series side-by-side.  Here is a screenshot of said table:&lt;/p&gt;
&lt;center&gt;
&lt;figure&gt; 
&lt;img src=&#34;https://driftlessdata.space/img/wpa-table.JPG&#34; width=&#34;400&#34; /&gt;
&lt;/figure&gt;
&lt;/center&gt;
&lt;p&gt;An &amp;ldquo;exciting event&amp;rdquo; is one that yields a large swing in the win expectancy of the game, as measured by Win Probability Added, or WPA.  Read Fangraph&amp;rsquo;s &lt;a href=&#34;https://www.fangraphs.com/library/misc/wpa/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;excellent glossary entry on WPA&lt;/a&gt; for more detail, but essentially, the bigger the WPA of an event, the more exciting it is.&lt;/p&gt;
&lt;p&gt;The table is great, but it&amp;rsquo;s hard to see which of the two games has the &lt;em&gt;most&lt;/em&gt; exciting Top-20 events.  I wanted to visualize!  But I needed the data.  Fangraphs has play logs for every single Major League game, which lists (among other metrics) the events of the game; the win expectancy following the event; and the WPA of the event.  I needed data from the &lt;a href=&#34;https://www.fangraphs.com/plays.aspx?date=2011-10-27&amp;amp;team=Cardinals&amp;amp;dh=0&amp;amp;season=2011&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Game 6, 2011&lt;/a&gt; and the &lt;a href=&#34;https://www.fangraphs.com/plays.aspx?date=2017-10-29&amp;amp;team=Astros&amp;amp;dh=0&amp;amp;season=2017&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Game 5, 2017&lt;/a&gt; play logs.  But I needed them both in the same data source!&lt;/p&gt;
&lt;p&gt;&lt;code&gt;R&lt;/code&gt; has a great package &lt;code&gt;rvest&lt;/code&gt; that makes web-scraping (especially scraping html tables) quite easy.  Here&amp;rsquo;s the code I wrote to scrape the &lt;a href=&#34;https://www.fangraphs.com/plays.aspx?date=2011-10-27&amp;amp;team=Cardinals&amp;amp;dh=0&amp;amp;season=2011&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Game 6, 2011&lt;/a&gt; data; do some cleaning; and write the cleaned data into a .csv file.  I wrote very similar code to get the &lt;a href=&#34;https://www.fangraphs.com/plays.aspx?date=2017-10-29&amp;amp;team=Astros&amp;amp;dh=0&amp;amp;season=2017&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Game 5, 2017&lt;/a&gt; data:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;library(rvest)
library(dplyr)
#Read in the data, find the right table:
url &amp;lt;- &#39;https://www.fangraphs.com/plays.aspx?date=2011-10-27&amp;amp;team=Cardinals&amp;amp;dh=0&amp;amp;season=2011&#39;
raw &amp;lt;- read_html(url)%&amp;gt;%
       html_table(fill=TRUE)
mytable &amp;lt;- raw[[9]][,1:12]

#Use dplyr to clean it up. By code row:
  #Create absolute value of WPA
  #Create new column to indicate the game
  #Remove the &amp;quot;%&amp;quot; from the win expectancy, create Event number
  #Arrange in descending order by WPA
  #Create rank column
cleantable &amp;lt;- mytable %&amp;gt;%
  mutate(WPA_abs = abs(WPA)) %&amp;gt;%                                            
  mutate(Game = rep(&#39;Game 6, 2011&#39;,nrow(mytable))) %&amp;gt;%                    
  mutate(WE = as.numeric(gsub(&#39;%&#39;,&#39;&#39;,WE)), Event = 1:nrow(mytable)) %&amp;gt;%      
  arrange(-WPA_abs) %&amp;gt;%                                                     
  mutate(WPA_Rank = 1:nrow(mytable))                                          

#Write cleaned data to csv file
write.csv(cleantable,file=&#39;WPA_Game6_2011_all.csv&#39;,row.names=FALSE)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then on to visualizing!  Using Tableau, I created a win-expectancy graph for each of the games.  The red dots indicate &amp;ldquo;exciting events&amp;rdquo;; events with WPA of 15% or more:&lt;/p&gt;
&lt;center&gt;
&lt;iframe src=&#34;https://public.tableau.com/views/WPA_WS_blog/tracker-dash?:embed=y?:showVizHome=no&#34;
 width=&#34;755&#34; height=&#34;392&#34;&gt;&lt;/iframe&gt;
&lt;/center&gt;
&lt;p&gt;Clearly, both games were crazy, with wild swings in win expectancy!  If you count up the red dots, Game 6 in 2011 had 8 &amp;ldquo;exciting events&amp;rdquo; while Game 5 in 2017 had 10 &amp;ldquo;exciting events.&amp;rdquo;  15% is quite an arbitrary threshold for &amp;ldquo;exciting&amp;rdquo; however; different thresholds would likely change the comparison.  Comparing total WPA flips the story: the total WPA of 7.2 in Game 6, 2011 was larger than the total WPA of 6.2 in Game 5, 2017.&lt;/p&gt;
&lt;p&gt;My primary interest, however, was to compare the top-20 most exciting events of both games in a clearer visual manner, respecting principles of human perception:&lt;/p&gt;
&lt;iframe src=&#34;https://public.tableau.com/views/WPA_WS_blog/Top-20?:embed=y?:showVizHome=no&#34;
 width=&#34;655&#34; height=&#34;495&#34;&gt;&lt;/iframe&gt;
&lt;p&gt;From this graph, we can see the four points on the right that lie below the reference line.  These indicate that the top four most exciting events in Game 6, 2011 were &lt;em&gt;more exciting&lt;/em&gt; than the top four most exciting events from Game 5, 2017.  On the other hand, the top 5-10 most exciting events in Game 5, 2017 lie above the reference line, indicating they were more exciting than the events with WPA ranked 5-10 in Game 6, 2011.  The rest of the events ranked 11-20 in WPA go back to lying below the line.&lt;/p&gt;
&lt;p&gt;So, it does appear that Game 6, 2011 was truly a more thrilling game than Game 5, 2017!   The total WPA of Game 6, 2011 was greater than the total WPA in Game 5, 2017, and of the top-20 &amp;ldquo;most exciting&amp;rdquo; events, they tended to be &lt;em&gt;more exciting&lt;/em&gt; in 2011. Oh well, Game 5, 2017 was still worth losing a few hours of sleep!  I think&amp;hellip;.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
